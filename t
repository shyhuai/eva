export PYTHONPATH=/workspace/repos/deva
PY=/opt/conda/bin/python
DATAPATH=/share/datasets/ILSVRC2012
NCCL_P2P_DISABLE=1 $PY -m torch.distributed.run --nproc_per_node=8 --nnodes=1 --node_rank=0 --master_addr=localhost examples/pytorch_imagenet_resnet.py --horovod 0 --model resnet50 --base-lr 0.15 --epochs 55 --lr-schedule step --lr-decay 25 35 40 45 50 --kfac-update-freq 1 --kfac-cov-update-freq 1 --kfac-name deva --stat-decay 0.95 --damping 0.001 --kl-clip 0.001 --exclude-parts '' --batch-size 256 --batches-per-allreduce 1 --train-dir $DATAPATH/train --val-dir $DATAPATH/val --momentum 0.9 --weight-decay 5e-5 --opt-name sgd --ngrads 32 --mixed-precision 1 --beta1 0.9 --beta2 0 # reach 75.9% at epoch 44 with deva, max acc at 76.1%

#$PY -m torch.distributed.run --nproc_per_node=8 --nnodes=1 --node_rank=0 --master_addr=haigpu2 examples/pytorch_imagenet_resnet.py --horovod 0 --model resnet50 --base-lr 0.6 --epochs 55 --lr-schedule step --lr-decay 25 35 40 45 50 --kfac-update-freq 1 --kfac-cov-update-freq 1 --kfac-name deva --stat-decay 0.95 --damping 0.001 --kl-clip 0.001 --exclude-parts '' --batch-size 1024 --batches-per-allreduce 1 --train-dir /datasets/ILSVRC2012/train --val-dir /datasets/ILSVRC2012/val --momentum 0.9 --weight-decay 5e-5 --opt-name sgd --ngrads 32 --mixed-precision 1 --beta1 0.1 --beta2 0

#NCCL_P2P_DISABLE=1 /home/shaohuais/pytorch1.13/bin/python -m torch.distributed.run --nproc_per_node=8 --nnodes=1 --node_rank=0 --master_addr=haigpu2 examples/pytorch_imagenet_resnet.py --horovod 0 --model resnet50 --base-lr 0.15 --epochs 90 --lr-schedule step --lr-decay 30 60 80 --kfac-update-freq 0 --kfac-cov-update-freq 1 --kfac-name deva --stat-decay 0.95 --damping 0.001 --kl-clip 0.001 --exclude-parts '' --batch-size 256 --batches-per-allreduce 1 --train-dir /datasets/ILSVRC2012/train --val-dir /datasets/ILSVRC2012/val --momentum 0.9 --weight-decay 5e-5 --opt-name sgd --ngrads 32 --mixed-precision 1 --beta1 0.9 --beta2 0
